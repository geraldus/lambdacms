lambdacms-patches
=================

Patch set to install [lambdacms-core](https://github.com/lambdacms/lambdacms-core)
into a freshly init'ed [Yesod](http://yesodweb.com) application.

The patch set in this repository is tested with the Yesod scaffolding that is
generated by the `yesod-bin` command in Stackage **`nightly-2015-07-09`**.


## Applying the patch set

First the patches need to be downloaded by cloning the repository, we do so in
`/tmp`. Then we apply the patches with the good old `patch` command in a for loop.

Run the following from the root of your newly created Yesod project:

```bash
export TMP_PATCHES=/tmp/lambdacms-patches-`date +%s`
git clone https://github.com/lambdacms/lambdacms-patches.git $TMP_PATCHES
mv $PROJECT_NAME.cabal project_name.cabal
for f in $TMP_PATCHES/*.patch; do patch -p1 < $f; done
mv project_name.cabal $PROJECT_NAME.cabal
```


# Updating this patch set

Steps to update the patch set.

1.  Follow the [LambdaCms' installation guide](https://github.com/lambdacms/lambdacms-core/blob/master/README.md),
    up to the point where the patches need to be applied.
2.  Run `(cd ..; cp -R $PROJECT_NAME unpatched-$PROJECT_NAME)` to save a copy of the unpatched version.
3.  Apply the patches from this repo.
4.  Take note of any patch chunks that got rejected.
5.  Manually apply chunks that got rejected, if any.
6.  Get it to compile, and test if all works properly.
7.  Create a new patch set with the `create_patches.sh` script in this repo.
8.  Use a mult-file diff tool to see if the new patch set looks good.
9.  Copy the new patch set's files over the files in this repository.
10. Update this README to reflect the new Stackage package set that it is known to work with.
11. Commit the changes.



# License

All code in this repository is released under the MIT license, as specified
in the [LICENSE file](https://github.com/lambdacms/lambdacms-core/blob/master/LICENSE).
