lambdacms-patches
=================

Set of patches that install [lambdacms-core](https://hackage.haskell.org/package/lambdacms-core)
into a newly scaffolded [Yesod](http://yesodweb.com) application.

The patches in this repository are tested with the Yesod scaffolding that is
generated by the `yesod-bin` command in the Stackage release specified by
the `resolver` value in
[the `stack.yaml` file of this repository](https://github.com/lambdacms/lambdacms/blob/master/stack.yaml).


# How to apply these patches?

This is explained in great detail in
[the main README of this repository](https://github.com/lambdacms/lambdacms/blob/master/README.md).


# Updating these patches

As the scaffolding generated by `yesod-bin` is improved upon, these patches
may at some point not apply (cleanly) any more. In that case they should be
updated. The following steps servev as a reminder on how to update these
patches.

1.  Follow the
    [LambdaCms' installation guide](https://github.com/lambdacms/lambdacms),
    up to the point where the patches need to be applied.
2.  Run `(cd ..; cp -R $PROJECT_NAME unpatched-$PROJECT_NAME)` to save a copy of the unpatched version.
3.  Apply the patches from this repo.
4.  Take note of any patch chunks that got rejected.
5.  Manually apply chunks that got rejected, if any.
6.  Get it to compile (`stack build`) and test if all works properly.
7.  Make sure the test suite compiles and runs without errors (`stack test`).
7.  Create new patches with the `create_patches.sh` script in this repo.
8.  Use a multi-file diff tool to see if how the new patches are different from the patches in this repo.
9.  Apply the new patches to the `unpatched-$PROJECT_NAME` directory and check that it compiles.
10. Replace the patches in this repository with the new patches.
11. Commit the changes.



# License

All code in this repository is released under the MIT license, as specified
in the [LICENSE file](https://github.com/lambdacms/lambdacms/blob/master/LICENSE).
